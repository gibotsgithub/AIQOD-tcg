<div class="chatbot-wrapper">
  <h2 class="transaction-heading">New Transaction</h2>
  <div class="chatbot-row">
    <div class="chatbot-image">
      <svg
        width="57"
        height="57"
        viewBox="0 0 57 57"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          cx="28.5"
          cy="28.5"
          r="28.5"
          transform="rotate(180 28.5 28.5)"
          fill="#011735"
        />
        <rect
          x="57"
          y="26"
          width="34"
          height="26"
          transform="rotate(180 57 26)"
          fill="#011735"
        />
        <circle cx="29" cy="29" r="20" fill="white" />
        <circle cx="28.9999" cy="29.0001" r="18.6341" fill="#011735" />
        <path
          d="M29.3893 16.2411H28.6919V20.8347H29.3893V16.2411Z"
          fill="#03BCA3"
        />
        <path
          d="M30.5827 20.3497H27.4937C26.6642 20.3497 25.9917 21.0252 25.9917 21.8585C25.9917 22.6917 26.6642 23.3672 27.4937 23.3672H30.5827C31.4123 23.3672 32.0848 22.6917 32.0848 21.8585C32.0848 21.0252 31.4123 20.3497 30.5827 20.3497Z"
          fill="#03BCA3"
        />
        <path
          d="M28.7538 21.7957H29.326C35.1866 21.7957 39.943 26.5733 39.943 32.4601C39.943 35.7695 37.2698 38.4547 33.9752 38.4547H24.1002C20.8056 38.4547 18.1323 35.7695 18.1323 32.4601C18.1323 26.5733 22.8888 21.7957 28.7493 21.7957H28.7538Z"
          fill="#03BCA3"
        />
        <path
          d="M36.5148 32.9271C36.2287 33.0708 35.9113 33.1426 35.585 33.1426H22.4959C22.1695 33.1426 21.8521 33.0663 21.566 32.9271C20.8642 32.5814 20.4708 31.8764 20.5691 31.1534L20.5781 31.0996C20.9134 28.6568 23.1172 26.7799 25.8128 26.6407C26.9528 26.5823 28.1553 26.5509 29.4025 26.5554C30.3815 26.5598 31.3292 26.5913 32.2412 26.6362C34.9502 26.7754 37.1675 28.6478 37.5072 31.0996C37.5072 31.1175 37.5117 31.1355 37.5161 31.1534C37.6145 31.8764 37.2211 32.5769 36.5193 32.9271H36.5148Z"
          fill="#011735"
        />
        <path
          d="M25.5891 31.9034C26.5668 31.9034 27.3593 31.1073 27.3593 30.1252C27.3593 29.1432 26.5668 28.347 25.5891 28.347C24.6114 28.347 23.8188 29.1432 23.8188 30.1252C23.8188 31.1073 24.6114 31.9034 25.5891 31.9034Z"
          fill="#EEFDFF"
        />
        <path
          d="M25.5892 31.6206C26.4113 31.6206 27.0778 30.9511 27.0778 30.1253C27.0778 29.2995 26.4113 28.63 25.5892 28.63C24.7671 28.63 24.1006 29.2995 24.1006 30.1253C24.1006 30.9511 24.7671 31.6206 25.5892 31.6206Z"
          fill="#011735"
        />
        <path
          d="M26.5416 29.7346C26.5416 30.0399 26.2957 30.2869 25.9917 30.2869C25.6878 30.2869 25.4419 30.0399 25.4419 29.7346C25.4419 29.4292 25.6878 29.1823 25.9917 29.1823C26.2957 29.1823 26.5416 29.4292 26.5416 29.7346Z"
          fill="#EEFDFF"
        />
        <path
          d="M25.3699 31.4902C25.4909 31.4902 25.589 31.3917 25.589 31.2702C25.589 31.1487 25.4909 31.0502 25.3699 31.0502C25.2489 31.0502 25.1509 31.1487 25.1509 31.2702C25.1509 31.3917 25.2489 31.4902 25.3699 31.4902Z"
          fill="#EEFDFF"
        />
        <path
          d="M24.8246 30.9381C24.8246 31.0009 24.7754 31.0503 24.7128 31.0503C24.6502 31.0503 24.6011 31.0009 24.6011 30.9381C24.6011 30.8752 24.6502 30.8258 24.7128 30.8258C24.7754 30.8258 24.8246 30.8752 24.8246 30.9381Z"
          fill="#EEFDFF"
        />
        <path
          d="M32.259 31.9034C33.2367 31.9034 34.0293 31.1073 34.0293 30.1252C34.0293 29.1432 33.2367 28.347 32.259 28.347C31.2813 28.347 30.4888 29.1432 30.4888 30.1252C30.4888 31.1073 31.2813 31.9034 32.259 31.9034Z"
          fill="#EEFDFF"
        />
        <path
          d="M32.2586 31.6206C33.0808 31.6206 33.7473 30.9511 33.7473 30.1253C33.7473 29.2995 33.0808 28.63 32.2586 28.63C31.4365 28.63 30.77 29.2995 30.77 30.1253C30.77 30.9511 31.4365 31.6206 32.2586 31.6206Z"
          fill="#011735"
        />
        <path
          d="M33.211 29.7346C33.211 30.0399 32.9652 30.2869 32.6612 30.2869C32.3572 30.2869 32.1113 30.0399 32.1113 29.7346C32.1113 29.4292 32.3572 29.1823 32.6612 29.1823C32.9652 29.1823 33.211 29.4292 33.211 29.7346Z"
          fill="#EEFDFF"
        />
        <path
          d="M32.035 31.4902C32.1559 31.4902 32.254 31.3917 32.254 31.2702C32.254 31.1487 32.1559 31.0502 32.035 31.0502C31.914 31.0502 31.8159 31.1487 31.8159 31.2702C31.8159 31.3917 31.914 31.4902 32.035 31.4902Z"
          fill="#EEFDFF"
        />
        <path
          d="M31.4896 30.9381C31.4896 31.0009 31.4405 31.0503 31.3779 31.0503C31.3153 31.0503 31.2661 31.0009 31.2661 30.9381C31.2661 30.8752 31.3153 30.8258 31.3779 30.8258C31.4405 30.8258 31.4896 30.8752 31.4896 30.9381Z"
          fill="#EEFDFF"
        />
        <path
          d="M29.9297 15.9358C29.9297 16.4297 29.5319 16.8338 29.0357 16.8338C28.5395 16.8338 28.1416 16.4342 28.1416 15.9358C28.1416 15.4374 28.5395 15.0377 29.0357 15.0377C29.5319 15.0377 29.9297 15.4374 29.9297 15.9358Z"
          fill="#03BCA3"
        />
        <path
          d="M29.6616 15.5856C29.6616 15.7382 29.5409 15.8595 29.3889 15.8595C29.2369 15.8595 29.1162 15.7382 29.1162 15.5856C29.1162 15.4329 29.2369 15.3116 29.3889 15.3116C29.5409 15.3116 29.6616 15.4329 29.6616 15.5856Z"
          fill="white"
        />
        <path
          d="M36.68 30.4755C36.5816 30.5473 35.8887 29.1284 34.0246 27.8935C33.372 27.4625 32.7238 27.1526 32.764 27.0628C32.8042 26.973 33.5329 27.1392 34.114 27.4131C35.9692 28.2797 36.8007 30.3902 36.6845 30.4755H36.68Z"
          fill="white"
        />
        <path
          d="M31.7047 34.2069C31.6824 34.4449 31.4857 34.629 31.2487 34.6514L27.9809 34.9702C27.744 34.9927 27.516 34.8535 27.449 34.6245C27.4177 34.5212 27.3953 34.4179 27.3774 34.3102C27.3774 34.2787 27.3774 34.2518 27.3998 34.2248C27.4177 34.2024 27.4445 34.1844 27.4758 34.1844L31.6019 33.7848C31.6332 33.7848 31.66 33.7893 31.6824 33.8117C31.7047 33.8297 31.7181 33.8611 31.7181 33.8881C31.7226 33.9958 31.7181 34.1036 31.7092 34.2114L31.7047 34.2069Z"
          fill="#EEFDFF"
        />
        <path
          d="M31.7048 34.2069C31.602 35.2262 30.7929 36.0614 29.7423 36.1647C28.7052 36.2635 27.7665 35.6169 27.458 34.6604C27.5385 34.867 27.753 34.9882 27.9766 34.9658L31.2488 34.6515C31.4858 34.629 31.6825 34.4449 31.7048 34.2069Z"
          fill="#079E85"
        />
      </svg>
    </div>

    <div class="chatbot-column">
      <div class="greeting-box">
        <p class="greeting">Good Morning! How can I help?</p>
      </div>

      <div class="regulation-box">
        <div class="focus-header">
          <p class="focus-label">Select Regulation Focus</p>
          <p class="focus-note">
            Note: Please upload necessary document first and then select the
            regulation focus.
          </p>
        </div>
        <ul class="regulation-links">
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 314 (AML/CFT)</a
            >
          </li>
          <li>
            <a
              href="#"
              (click)="setText($event, 'MAS Notice 123 (Data Protection)')"
              >MAS Notice 123 (Data Protection)</a
            >
          </li>
          <li>
            <a
              href="#"
              (click)="setText($event, 'MAS Guidelines on Risk Management')"
              >MAS Guidelines on Risk Management</a
            >
          </li>

          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Guidelines on Outsourcing Banks</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 610 and Notice 1003</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Guidelines on Notice 626</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 610</a
            >
          </li>
            <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 637</a
            >
          </li>
            <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 649</a
            >
          </li>
            <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 652</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Securities and Futures Act</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >Guidelines on Outsourcing</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice FAA-N16 (Recommendations on Investment Products)</a
            >
          </li>
          <li>
            <a (click)="setText($event, 'MAS Notice 314 (AML/CFT)')" href="#"
              >MAS Notice 652</a
            >
          </li>
            <li>
            <a href="#" (click)="setText($event, 'All Applicable Regulations')"
              >All Applicable Regulations</a
            >
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="chat-container" #chatContainer>
    <!-- Messages will be appended here -->
  </div>
  <div *ngIf="loading" class="loading-spinner">
    <span>Loading...</span>
  </div>
</div>

<!-- Floating Upload Panel (Frame 276) -->
<div class="footer-wrapper" [class.with-file]="selectedFileName">
  <div class="footer-upload-box">
    <!-- File Tag Row -->
    <div class="file-tag" *ngIf="selectedFileName">
      <div class="file-icon">
        <img
          src="https://cdn-icons-png.flaticon.com/512/337/337946.png"
          alt="File Icon"
        />
      </div>
      <span class="file-name">{{ selectedFileName }}</span>
      <div class="remove-file" (click)="removeFile()">
        <svg
          width="10"
          height="10"
          viewBox="0 0 10 10"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.26683 9.66658L0.333496 8.73325L4.06683 4.99992L0.333496 1.26659L1.26683 0.333252L5.00016 4.06659L8.7335 0.333252L9.66683 1.26659L5.9335 4.99992L9.66683 8.73325L8.7335 9.66658L5.00016 5.93325L1.26683 9.66658Z"
            fill="white"
          />
        </svg>
      </div>
    </div>

    <!-- Text Input -->
    <input
      type="text"
      class="chat-input"
      placeholder="Ask Anything"
      #myInput
      [disabled]="!selectedFileName"
    />

    <!-- Bottom Actions + Send Button -->
    <div class="footer-actions-row">
      <div class="upload-buttons">
        <button id="upload-trigger" (click)="triggerFileInput()">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.2 18.9668H12.8667V14.225L14.7667 16.125L15.9333 14.95L12 11.0833L8.1 14.9832L9.275 16.15L11.2 14.225V18.9668ZM5.66675 22C5.21675 22 4.82642 21.8348 4.49575 21.5043C4.16525 21.1736 4 20.7833 4 20.3333V3.66675C4 3.21675 4.16525 2.82642 4.49575 2.49575C4.82642 2.16525 5.21675 2 5.66675 2H14.35L20 7.65V20.3333C20 20.7833 19.8348 21.1736 19.5042 21.5043C19.1736 21.8348 18.7833 22 18.3333 22H5.66675ZM13.5167 8.43325V3.66675H5.66675V20.3333H18.3333V8.43325H13.5167Z"
            />
          </svg>
          Upload
        </button>
        <!-- Hidden file input -->
        <input
          type="file"
          #fileInput
          (change)="onFileSelected($event)"
          style="display: none"
        />
        <button>
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10 20C8.61117 20 7.30842 19.7375 6.09175 19.2125C4.87508 18.6875 3.81533 17.9736 2.9125 17.0708C2.00967 16.1681 1.29858 15.1056 0.77925 13.8833C0.25975 12.6611 0 11.3556 0 9.96675C0 8.57225 0.25975 7.27083 0.77925 6.0625C1.29858 4.85417 2.00967 3.79858 2.9125 2.89575C3.81533 1.99308 4.87508 1.28475 6.09175 0.770751C7.30842 0.256917 8.61117 0 10 0C11.3945 0 12.6987 0.256917 13.9125 0.770751C15.1263 1.28475 16.1847 1.99308 17.0875 2.89575C17.9903 3.79858 18.7014 4.85417 19.2208 6.0625C19.7403 7.27083 20 8.57225 20 9.96675C20 11.3556 19.7403 12.6611 19.2208 13.8833C18.7014 15.1056 17.9903 16.1681 17.0875 17.0708C16.1847 17.9736 15.1263 18.6875 13.9125 19.2125C12.6987 19.7375 11.3945 20 10 20ZM10 18.35C10.5333 17.75 10.9833 17.0833 11.35 16.35C11.7167 15.6167 12.0167 14.7723 12.25 13.8168H7.76675C7.98892 14.7278 8.28333 15.5583 8.65 16.3083C9.01667 17.0583 9.46667 17.7388 10 18.35ZM7.71675 18.0168C7.33892 17.4111 7.0125 16.7653 6.7375 16.0793C6.4625 15.3931 6.23333 14.6389 6.05 13.8168H2.56675C3.15008 14.8834 3.84033 15.7445 4.6375 16.4C5.43467 17.0555 6.46108 17.5944 7.71675 18.0168ZM12.3 18C13.4112 17.6445 14.407 17.1084 15.2875 16.3918C16.168 15.6751 16.8833 14.8168 17.4333 13.8168H13.9668C13.7723 14.6278 13.5403 15.3763 13.2708 16.0625C13.0014 16.7487 12.6778 17.3945 12.3 18ZM1.95 12.15H5.73325C5.68325 11.7388 5.65133 11.3597 5.6375 11.0125C5.62367 10.6653 5.61675 10.3168 5.61675 9.96675C5.61675 9.57225 5.62642 9.2125 5.64575 8.8875C5.66525 8.5625 5.7 8.21108 5.75 7.83325H1.95C1.8445 8.21108 1.77092 8.55975 1.72925 8.87925C1.68758 9.19858 1.66675 9.56108 1.66675 9.96675C1.66675 10.3723 1.68758 10.7431 1.72925 11.0793C1.77092 11.4153 1.8445 11.7722 1.95 12.15ZM7.43325 12.15H12.5833C12.6444 11.6945 12.6848 11.3043 12.7043 10.9793C12.7236 10.6543 12.7333 10.3168 12.7333 9.96675C12.7333 9.62775 12.7236 9.30133 12.7043 8.9875C12.6848 8.67367 12.6444 8.28892 12.5833 7.83325H7.43325C7.37225 8.28892 7.332 8.67367 7.3125 8.9875C7.293 9.30133 7.28325 9.62775 7.28325 9.96675C7.28325 10.3168 7.293 10.6543 7.3125 10.9793C7.332 11.3043 7.37225 11.6945 7.43325 12.15ZM14.25 12.15H18.05C18.1555 11.7722 18.2291 11.4153 18.2708 11.0793C18.3124 10.7431 18.3333 10.3723 18.3333 9.96675C18.3333 9.56108 18.3124 9.19858 18.2708 8.87925C18.2291 8.55975 18.1555 8.21108 18.05 7.83325H14.2668C14.3168 8.33325 14.3514 8.74025 14.3708 9.05425C14.3903 9.36808 14.4 9.67225 14.4 9.96675C14.4 10.3278 14.3875 10.6708 14.3625 10.9958C14.3375 11.3208 14.3 11.7055 14.25 12.15ZM13.95 6.16675H17.4333C16.9056 5.12225 16.2014 4.24167 15.3208 3.525C14.4403 2.80833 13.4278 2.29442 12.2833 1.98325C12.6611 2.57775 12.9848 3.2125 13.2543 3.8875C13.5236 4.5625 13.7555 5.32225 13.95 6.16675ZM7.76675 6.16675H12.2668C12.0778 5.33342 11.7861 4.53342 11.3918 3.76675C10.9973 3.00008 10.5333 2.30558 10 1.68325C9.5 2.18325 9.075 2.78608 8.725 3.49175C8.375 4.19725 8.05558 5.08892 7.76675 6.16675ZM2.56675 6.16675H6.06675C6.23892 5.35558 6.45692 4.61525 6.72075 3.94575C6.98475 3.27642 7.31117 2.62783 7.7 2C6.5555 2.31117 5.55133 2.8195 4.6875 3.525C3.82367 4.2305 3.11675 5.11108 2.56675 6.16675Z"
              fill="#353535"
            />
          </svg>
          Intranet Search
        </button>
        <button>
          <svg
            width="14"
            height="19"
            viewBox="0 0 14 19"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0 19V17.3333H5.13325V14.9332H4.88325C3.52225 14.9332 2.36808 14.4597 1.42075 13.5125C0.473583 12.5653 0 11.4112 0 10.05C0 9.03333 0.2875 8.10833 0.8625 7.275C1.4375 6.44167 2.2 5.85 3.15 5.5C3.23883 4.86667 3.53192 4.35275 4.02925 3.95825C4.52642 3.56392 5.1 3.38342 5.75 3.41675L5.21675 1.91675L6.21675 1.55725L5.86675 0.63325L7.6 0L7.93325 0.93325L8.91675 0.58325L11.7168 8L10.6833 8.36675L11.0333 9.3L9.33325 9.91675L9 8.98325L7.96675 9.36675L7.35 7.68325C7.1 7.94992 6.80692 8.14442 6.47075 8.26675C6.13475 8.38892 5.7815 8.43892 5.411 8.41675C5.00367 8.39442 4.625 8.268 4.275 8.0375C3.925 7.807 3.63892 7.51675 3.41675 7.16675C2.87775 7.44442 2.45133 7.84142 2.1375 8.35775C1.82367 8.87408 1.66675 9.43817 1.66675 10.05C1.66675 10.9435 1.97942 11.703 2.60475 12.3285C3.23025 12.954 3.98975 13.2668 4.88325 13.2668H13.3333V14.9332H7.8V17.3333H14V19H0ZM8.81675 7.65L10 7.21675L8.1 2.21675L6.9 2.65L8.81675 7.65ZM5.597 7.08325C5.92683 7.08325 6.20425 6.97175 6.42925 6.74875C6.65425 6.52575 6.76675 6.24933 6.76675 5.9195C6.76675 5.58983 6.65517 5.3125 6.432 5.0875C6.209 4.8625 5.93267 4.75 5.603 4.75C5.27317 4.75 4.99575 4.8615 4.77075 5.0845C4.54575 5.30767 4.43325 5.58408 4.43325 5.91375C4.43325 6.24342 4.54483 6.52075 4.768 6.74575C4.991 6.97075 5.26733 7.08325 5.597 7.08325Z"
              fill="#353535"
            />
          </svg>
          Internal Research
        </button>
      </div>
      <div class="send-button-container">
        <button
          class="send-button-icon"
          (click)="sendFileMessage()"
          [disabled]="!selectedFileName || !myInput.value.trim()"
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M7 16V3.825L1.4 9.425L0 8L8 0L16 8L14.6 9.425L9 3.825V16H7Z"
              fill="white"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
