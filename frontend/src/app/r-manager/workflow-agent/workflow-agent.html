<div class="workflow-agent">
  <div class="workflow-header">
    <button class="back-btn" (click)="goBack()">
      <svg
        width="32"
        height="32"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="mask0_0_1638"
          style="mask-type: alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="32"
          height="32"
        >
          <rect width="32" height="32" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_0_1638)">
          <path
            d="M15.9993 21.3315L17.866 19.4648L15.7327 17.3315H21.3327V14.6648H15.7327L17.866 12.5315L15.9993 10.6648L10.666 15.9981L15.9993 21.3315ZM15.9993 29.3315C14.1549 29.3315 12.4216 28.9815 10.7993 28.2815C9.17713 27.5815 7.76602 26.6315 6.56602 25.4315C5.36602 24.2315 4.41602 22.8204 3.71602 21.1981C3.01602 19.5759 2.66602 17.8426 2.66602 15.9981C2.66602 14.1537 3.01602 12.4204 3.71602 10.7981C4.41602 9.17591 5.36602 7.76479 6.56602 6.56479C7.76602 5.36479 9.17713 4.41479 10.7993 3.71479C12.4216 3.01479 14.1549 2.66479 15.9993 2.66479C17.8438 2.66479 19.5771 3.01479 21.1993 3.71479C22.8216 4.41479 24.2327 5.36479 25.4327 6.56479C26.6327 7.76479 27.5827 9.17591 28.2827 10.7981C28.9827 12.4204 29.3327 14.1537 29.3327 15.9981C29.3327 17.8426 28.9827 19.5759 28.2827 21.1981C27.5827 22.8204 26.6327 24.2315 25.4327 25.4315C24.2327 26.6315 22.8216 27.5815 21.1993 28.2815C19.5771 28.9815 17.8438 29.3315 15.9993 29.3315ZM15.9993 26.6648C18.9771 26.6648 21.4993 25.6315 23.566 23.5648C25.6327 21.4981 26.666 18.9759 26.666 15.9981C26.666 13.0203 25.6327 10.4981 23.566 8.43146C21.4993 6.36479 18.9771 5.33146 15.9993 5.33146C13.0216 5.33146 10.4993 6.36479 8.43268 8.43146C6.36602 10.4981 5.33268 13.0203 5.33268 15.9981C5.33268 18.9759 6.36602 21.4981 8.43268 23.5648C10.4993 25.6315 13.0216 26.6648 15.9993 26.6648Z"
            fill="#333333"
          />
        </g>
      </svg>
      Go Back
    </button>
    <div class="dashboard-header-row">
    <h2 class="dashboard-heading">AI Agents</h2>
  <h2 class="acra-title">ACRA</h2>
  </div>
  </div>

  <div class="workflow-grid">
    <div class="workflow-tab" *ngFor="let tab of tabs; let i = index">
      <div class="svg-wrap">
        <div [innerHTML]="svg['backLine']"></div>
        <div [innerHTML]="svg['maker']"></div>
        <div
          *ngIf="i >= 1"
          [innerHTML]="svg['circleBackgroundActive']"
          class="small-circle"
        ></div>
        <div
          *ngIf="i === 1"
          [innerHTML]="svg['docValidationActive']"
          class="small-circle"
        ></div>
        <div
          *ngIf="i === 2"
          [innerHTML]="svg['contextAwareActive']"
          class="small-circle"
        ></div>
        <div
          *ngIf="i === 3"
          [innerHTML]="svg['preCheckActive']"
          class="small-circle"
        ></div>
        <div
          *ngIf="i === 4"
          [innerHTML]="svg['complianceAgentActive']"
          class="small-circle"
        ></div>
        <div
          *ngIf="i === 5"
          [innerHTML]="svg['workflowOptActive']"
          class="small-circle"
        ></div>
      </div>

      <div class="green-bar">{{tab.greenBar}}</div>

      <div class="tab-content" [innerHTML]="tab.content"></div>
    </div>
  </div>
  <div class="workflow-footer">
    <p class="footer-text">AI Agent Performance Metrics</p>
    <div class="footer-graphs">
      <ng-container *ngFor="let metric of metrics; let i = index">
        <div class="graph-wrapper">
          <div class="graph-pair">
            <p class="graph-label">{{ metric.label }}</p>
            <div class="donut-container">
              <div
                class="donut-ring"
                [style.background]="
            'conic-gradient(#00c2c2 ' + metric.percent * 3.6 + 'deg, #e6e6e6 0deg)'
          "
              >
                <div class="middle-ring">
                  <div class="donut-inner">
                    <span>{{ metric.percent }}%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Vertical line between items, not after last -->
          <div class="vertical-divider" *ngIf="i < metrics.length - 1"></div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
